#!/bin/sh
# Build the site, then sync it to the server.

# Where the remote webserver expects the site.
SERVE=/usr/local/www/

# Clean the local public directory, to make sure we have atomic builds.
rm -rf public

# Generate the static site.
hugo

# Sync the Caddyfile.
scp Caddyfile "chrishost:$SERVE/Caddyfile"

# Sync the built site to the server.
rsync -az --progress --delete public/ "chrishost:$SERVE/html"
