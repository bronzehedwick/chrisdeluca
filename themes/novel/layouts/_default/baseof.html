<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ .Site.Params.description }}">
  {{ hugo.Generator }}
  {{ template "_internal/opengraph.html" . }}
  {{ template "_internal/twitter_cards.html" . }}
  <title>{{ title .Title }}</title>
  <link rel="authorization_endpoint" href="https://micro.blog/indieauth/auth" />
  <link rel="token_endpoint" href="https://micro.blog/indieauth/token" />
  <link rel="pgpkey" href="{{ .Site.Author.key.url }}">
  <link rel="author" href="/humans.txt">
  <link rel="webmention" href="https://webmention.io/www.chrisdeluca.me/webmention" />
  <link rel="pingback" href="https://webmention.io/www.chrisdeluca.me/xmlrpc" />
  {{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
  {{ end -}}
  {{ $normalize := resources.Get "styles/vendor/normalize.css" }}
  {{ $theme := resources.Get "styles/theme.css" }}
  {{ $styles := slice $normalize $theme | resources.Concat "styles/theme.css" | resources.Minify | resources.Fingerprint "sha512" }}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" integrity="{{ $styles.Data.Integrity }}">
  {{ $print := resources.Get "styles/print.css" | resources.Minify | resources.Fingerprint "sha512" }}
  <link rel="stylesheet" href="{{ $print.Permalink }}" integrity="{{ $print.Data.Integrity }}" media="print">
  {{ if .Params.styles }}
    {{ range .Params.styles }}
      {{ $style := resources.Get (print "styles/" . ".css") | resources.Minify | resources.Fingerprint "sha512" }}
      <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}">
    {{ end }}
  {{ end }}
  {{ $appleTouchIcon := readFile "/static/apple-touch-icon.png" }}
  <link rel="apple-touch-icon" href="/apple-touch-icon.png?{{ md5 $appleTouchIcon }}">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#d1642a">
  <meta name="theme-color" content="#fdfcfa">
  {{ $faviconSvg := readFile "/static/favicon.svg" }}
  <link rel="icon" href="/favicon.svg?{{ md5 $faviconSvg }}" type="image/svg+xml">
  {{ if .Resources.Match "game/*" }}
    {{ $script := resources.Get "scripts/game.js" | resources.Minify | resources.Fingerprint "sha512" }}
    <script async defer src="{{ $script.Permalink }}" integrity="{{ $script.Data.Integrity }}"></script>
  {{ end }}
</head>

<body class="{{ if .IsNode }}node{{ end }}{{ if .IsPage }}page{{ end }}{{ if .IsHome }} home{{ end }}">
  <header>
    {{ block "header" . }}
      <a href="{{ .Site.BaseURL }}">
        {{ readFile "themes/novel/static/doodle.svg" | safeHTML }}
      </a>
      <p>{{ .Site.Params.description }}</p>
    {{ end }}
  </header>

  <main>
    <div class="content">
      {{ block "main" . }}
        <!-- The part of the page that differs between templates -->
      {{ end }}
    </div>
    <nav aria-label="Main navigation" class="main-navigation">
      <details class="main-navigation__toggle">
        <summary>Menu</summary>
        <ul>
          {{ $currentPage := . }}
          {{ range .Site.Menus.main }}
          {{ if .HasChildren }}
          <li class="{{ if $currentPage.HasMenuCurrent "main" . }}active{{ end }}">
            <a href="#">
              {{ .Pre }}
              <span>{{ .Name }}</span>
            </a>
          </li>
          <ul class="sub-menu">
            {{ range .Children }}
            <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
              <a href="{{ .URL }}">{{ .Name }}</a>
            </li>
            {{ end }}
          </ul>
          {{ else }}
          <li>
            <a {{ if (findRE .URL $currentPage) }}class="main-navigation__item--active" {{ end }}href="{{ .URL }}">
              {{ .Name }}
            </a>
          </li>
          {{ end }}
          {{ end }}
        </ul>
      </details>
    </nav>
  </main>

  <footer>
    <div class="h-card">
      <div class="about__photo">
        {{ $portraitFile := readFile (print "/static/" .Site.Author.photo) }}
        <img class="u-photo" src="{{ .Site.Author.photo }}?{{ md5 $portraitFile }}" alt="Portrait of {{ .Site.Author.name }}">
      </div>
      <div class="about__content">
        <p class="p-summary p-note">
          <span class="p-name">{{ .Site.Author.name }}</span> is a {{ delimit .Site.Author.identities "/" }} based in <span class="p-region">{{ .Site.Author.region }}</span> (<data class="p-tz" value="{{ now.Format "-0700" }}">{{ now.Format "MST" }}</data>).
        </p>
        <ul>
          <li>Homepage: <a class="u-url u-uid" href="/">{{ .Site.BaseURL }}</a></li>
          <li>Email: <a class="u-email" href="mailto:{{ .Site.Author.email }}">{{ .Site.Author.email }}</a></li>
          <li>Pronouns: <span class="u-pronoun">{{ .Site.Author.pronouns }}</span></li>
          <li>Nickname: <span class="p-nickname">{{ .Site.Author.nickname }}</span></li>
          <li>PGP key: <a class="u-key" href="{{ .Site.Author.key.url }}">{{ .Site.Author.key.id }}</a></li>
        </ul>
        <details>
          <summary>Around the web</summary>
          <ul>
            {{ range sort .Site.Params.socialLinks "weight" "desc" }}
              <li>
                <a href="{{ .url }}" rel="me">{{ .name }}</a>
              </li>
            {{ end }}
          </ul>
        </details>
      </div>
    </div>

    <nav class="indie-webring">
      An IndieWeb Webring üï∏üíç
      <ul>
        <li><a href="https://xn--sr8hvo.ws/%F0%9F%9A%94%F0%9F%9A%A2%E2%9A%94/previous">‚Üê Previous</a></li>
        <li><a href="https://xn--sr8hvo.ws/%F0%9F%9A%94%F0%9F%9A%A2%E2%9A%94/next">Next ‚Üí</a></li>
      </ul>
    </nav>

    <small>
      <nav>
        <ul>
          {{ range .Site.Menus.footer }}
            <li><a href="{{ .URL }}">{{ .Name }}</a></li>
          {{ end }}
        </ul>
      </nav>
      <p>&#169; 2009‚Äì{{ now.Format "2006" }} by {{ .Site.Author.name }}</p>
      <p>Unless otherwise noted, text content is available under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a> license.</p>
      <p>Code presented on, and used to create, this website is available under the <a href="https://opensource.org/licenses/MIT">MIT</a> license.</p>
    </small>
  </footer>

  {{ $mainScript := resources.Get "scripts/main.js" | resources.Minify | resources.Fingerprint "sha512" }}
  <script src="{{ $mainScript.Permalink }}" integrity="{{ $mainScript.Data.Integrity }}"></script>

  {{ if .Params.scripts }}
    {{ range .Params.scripts }}
      {{ $script := resources.Get (print "scripts/" .) | resources.Minify | resources.Fingerprint "sha512" }}
      <script src="{{ $script.Permalink }}" integrity="{{ $script.Data.Integrity }}"></script>
    {{ end }}
  {{ end }}

  {{ $analytics := resources.Get "scripts/vendor/goat-counter.js" | resources.Minify | resources.Fingerprint "sha512" }}
  {{ if not .Site.IsServer }}
  <script src="{{ $analytics.Permalink }}" integrity="{{ $analytics.Data.Integrity }}"></script>
  {{ end }}

</body>
</html>
